<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pig4cloud.pig.school.mapper.RegulatoryOpinionMapper">

  <resultMap id="regulatoryOpinionMap" type="com.pig4cloud.pig.school.api.vo.message.RegulatoryOpinionVO">
                  <id property="id" column="id"/>
                        <result property="schoolId" column="school_id"/>
                        <result property="content" column="content"/>
                        <result property="status" column="status"/>
                        <result property="type" column="type"/>
                        <result property="createTime" column="create_time"/>
                        <result property="updateTime" column="update_time"/>
                        <result property="delFlag" column="del_flag"/>
                        <result property="userId" column="user_id"/>
                        <result property="realName" column="real_name"/>
                        <result property="viewUser" column="view_user"/>
                        <result property="schName" column="sch_name"/>
                        <result property="viewName" column="viewName"/>
            </resultMap>

  <!--regulatoryOpinion简单分页查询-->
  <select id="getRegulatoryOpinionPage" resultMap="regulatoryOpinionMap">
    SELECT
    a.id,
    a.school_id,
    a.content,
    a.STATUS,
    a.type,
    a.create_time,
    a.update_time,
    a.del_flag,
    a.user_id,
    a.view_user,
    b.real_name,
    c.sch_name,
    b2.real_name as viewName
    FROM
    msg_regulatory_opinion a
    LEFT JOIN sys_user b on a.user_id = b.user_id
    LEFT JOIN se_school c on a.school_id = c.id
    LEFT JOIN sys_user b2 on a.view_user = b2.user_id
    <where>
      1=1 and a.del_flag='0'
              <if test="regulatoryOpinion.id != null">
          AND a.id = #{regulatoryOpinion.id}
        </if>
              <if test="regulatoryOpinion.schoolId != null">
          AND a.school_id = #{regulatoryOpinion.schoolId}
        </if>
              <if test="regulatoryOpinion.content != null and regulatoryOpinion.content.trim() != ''">
          AND a.content = #{regulatoryOpinion.content}
        </if>
              <if test="regulatoryOpinion.status != null and regulatoryOpinion.status.trim() != ''">
          AND a.status = #{regulatoryOpinion.status}
        </if>
              <if test="regulatoryOpinion.type != null and regulatoryOpinion.type.trim() != ''">
          AND a.type = #{regulatoryOpinion.type}
        </if>
              <if test="regulatoryOpinion.createTime != null and regulatoryOpinion.createTime.trim() != ''">
          AND a.create_time = #{regulatoryOpinion.createTime}
        </if>
              <if test="regulatoryOpinion.updateTime != null and regulatoryOpinion.updateTime.trim() != ''">
          AND a.update_time = #{regulatoryOpinion.updateTime}
        </if>
              <if test="regulatoryOpinion.delFlag != null and regulatoryOpinion.delFlag.trim() != ''">
          AND a.del_flag = #{regulatoryOpinion.delFlag}
        </if>
              <if test="regulatoryOpinion.userId != null">
          AND a.user_id = #{regulatoryOpinion.userId}
        </if>
             <if test="regulatoryOpinion.viewUser != null">
          AND a.view_user = #{regulatoryOpinion.viewUser}
        </if>
          </where>
    ORDER BY a.create_time DESC
  </select>



</mapper>
